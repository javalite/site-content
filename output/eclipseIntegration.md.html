<!--<ol class=breadcrumb>
   <li>
<a href=/>JavaLite</a>
</li>
   <li>
<a href=/activejdbc>ActiveJDBC</a>
</li>
   <li class=active>
Eclipseintegration
</li>
</ol>-->

<div class=page-header>
   <h1>Eclipse Integration</h1>
</div>

<p>As a general rule of thumb, instrumentation needs to be performed in case you run a program or a test that will execute ActiveJDBC models. See <a href="instrumentation">Instrumentation</a> for more detail. Basically Instrumentation adds special byte code instructions for ActiveJDBC to operate properly. Since Eclipse automatically recompiles classes each time you make modifications and save, it can blow away instrumented ActiveJDBC classes and replace them with just compiled versions (non-instrumented).</p>
<p>When this happens, you will see an exception similar to:</p>
<pre><code> org.javalite.activejdbc.InitException: failed to determine Model class name, are you sure models have been instrumented?</code></pre>
<p>This means that in before you run your program, model classes need to be instrumented.</p>
<h2 id="create-instrumentation-script">Create instrumentation script</h2>
<p>This page provides instructions based on a simple Maven ActiveJDBC example. Sources can be found here: <a href="https://github.com/javalite/simple-example">https://github.com/javalite/simple-example</a></p>
<p>Create a directory scripts:</p>
<pre><code>mkdir scripts</code></pre>
<p>Create instrumentation script:</p>
<pre><code>vi ./scripts/instrumentation.sh</code></pre>
<p>and place this content into the script:</p>
<pre><code>mvn process-classes</code></pre>
<p>Since Instrumentation plugin is bound to the <code>process-classes</code> phase, it will be executed when this goal is invoked. Make script executable:</p>
<pre><code>chmod a+x ./scripts/instrumentation.sh</code></pre>
<p>Execute script from the root of project:</p>
<pre><code>$./scripts/instrumentation.sh</code></pre>
<p>and observe output similar to this:</p>
<pre><code>**************************** START INSTRUMENTATION ****************************
Directory: /home/igor/tmp/simple-example/target/classes
Found model: org.javalite.activejdbc.examples.simple.Employee
Instrumented class: org.javalite.activejdbc.examples.simple.Employee in directory: /home/igor/tmp/simple-example/target/classes/
**************************** END INSTRUMENTATION ****************************</code></pre>
<p>If you see this output, everything is fine.</p>
<h2 id="configure-eclipse-builder">Configure Eclipse builder</h2>
<p>Now we need to configure Eclipse Builder to run Instrumentation before executing a unit test or running a program.</p>
<p>Select: Project -&gt; Properties -&gt; Builders, create a new builder and configure it like this:</p>
<p>eclipse-config.png</p>
<div class="figure">
<img src="images/eclipse-config.png" alt="Eclipse config" /><p class="caption">Eclipse config</p>
</div>
<p>Once this is configured you can run your Java program or a JUnit test. Your Instrumentation builder will be executed after Java Builder and Maven Project builder, ensuring that instrumentation is executed just before run time. Eclipse is also smart to call builders only if there are changes in code.</p>
<h2 id="if-you-get-execution-not-covered-by-lifecycle">If you get: &quot;execution not covered by lifecycle&quot;</h2>
<p>Sometimes Eclipse has issues with Maven: (<a href="http://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html">m2 xecution Not Covered...</a>). This is not related to ActiveJDBC. Here is a similar question on <a href="http://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin">StackOverflow: How to solve Plugin execution not covered...</a>.</p>
<p>Also you can refer to this thread: <a href="https://groups.google.com/forum/#!searchin/activejdbc-group/execution$20not$20covered$20by$20lifecycle/activejdbc-group/xQ5gUSnCalc/MWvALjevdAoJ">Plugin execution not covered by lifecycle configuration</a>.</p>
<p>Generally you need to add <code>build &gt; pluginManagement</code> tag and add the following content there:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;pluginManagement&gt;</span>
    <span class="kw">&lt;plugins&gt;</span>
        <span class="co">&lt;!--This plugin&#39;s configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--&gt;</span>
        <span class="kw">&lt;plugin&gt;</span>
            <span class="kw">&lt;groupId&gt;</span>org.eclipse.m2e<span class="kw">&lt;/groupId&gt;</span>
            <span class="kw">&lt;artifactId&gt;</span>lifecycle-mapping<span class="kw">&lt;/artifactId&gt;</span>
            <span class="kw">&lt;version&gt;</span>1.0.0<span class="kw">&lt;/version&gt;</span>
            <span class="kw">&lt;configuration&gt;</span>
                <span class="kw">&lt;lifecycleMappingMetadata&gt;</span>
                    <span class="kw">&lt;pluginExecutions&gt;</span>
                        <span class="kw">&lt;pluginExecution&gt;</span>
                            <span class="kw">&lt;pluginExecutionFilter&gt;</span>
                                <span class="kw">&lt;groupId&gt;</span>org.javalite<span class="kw">&lt;/groupId&gt;</span>
                                <span class="kw">&lt;artifactId&gt;</span>
                                    activejdbc-instrumentation
                                <span class="kw">&lt;/artifactId&gt;</span>
                                <span class="kw">&lt;versionRange&gt;</span>
                                    [1.4.11,)
                                <span class="kw">&lt;/versionRange&gt;</span>
                                <span class="kw">&lt;goals&gt;</span>
                                    <span class="kw">&lt;goal&gt;</span>instrument<span class="kw">&lt;/goal&gt;</span>
                                <span class="kw">&lt;/goals&gt;</span>
                            <span class="kw">&lt;/pluginExecutionFilter&gt;</span>
                            <span class="kw">&lt;action&gt;</span>
                                <span class="kw">&lt;ignore&gt;&lt;/ignore&gt;</span>
                            <span class="kw">&lt;/action&gt;</span>
                        <span class="kw">&lt;/pluginExecution&gt;</span>
                    <span class="kw">&lt;/pluginExecutions&gt;</span>
                <span class="kw">&lt;/lifecycleMappingMetadata&gt;</span>
            <span class="kw">&lt;/configuration&gt;</span>
        <span class="kw">&lt;/plugin&gt;</span>
    <span class="kw">&lt;/plugins&gt;</span>
<span class="kw">&lt;/pluginManagement&gt;</span></code></pre>
