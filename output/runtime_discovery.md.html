<!--<ol class=breadcrumb>
   <li>
<a href=/>JavaLite</a>
</li>
   <li>
<a href=/activejdbc>ActiveJDBC</a>
</li>
   <li class=active>
Runtime discovery
</li>
</ol>-->

<div class=page-header>
   <h1>Runtime discovery</h1>
</div>

<p>Discovers tables and corresponding metadata from database at runtime.</p>
<h2 id="runtime-discovery">Runtime discovery</h2>
<p>ActiveJDBC performs a runtime discovery of tables that correspond to models. This happens once when any model is used for the first time.</p>
<p>What gets discovered:</p>
<ol style="list-style-type: decimal">
<li>Models and their corresponding tables</li>
<li>Table columns as model attributes</li>
<li><a href="one_to_many_associations">One to many relationships</a></li>
<li><a href="many_to_many_associations">Many to many relationships</a></li>
</ol>
<p>Please, see <a href="english_inflections">English inflections</a> to understand how table names are mapped to model names</p>
<blockquote>
<p>Model metadata and model relationships are discovered at runtime from database schema.</p>
</blockquote>
<h2 id="automatic-entity-relationship-diagram">Automatic Entity Relationship Diagram</h2>
<p>When a discovery process completes, the framework can print the DDL diagram to a log file. Please, see <a href="logging">Logging</a> to find out how to turn loggin on.</p>
<p>Here is an example of registration, discovery and DDL log output:</p>
<pre><code>Registered model: class org.javalite.activejdbc.test_models.Member
Registered model: class org.javalite.activejdbc.test_models.Sword
Registered model: class org.javalite.activejdbc.test_models.Plant
Registered model: class org.javalite.activejdbc.test_models.Meal
Registered model: class org.javalite.activejdbc.test_models.Course
Registered model: class org.javalite.activejdbc.test_models.Developer
Registered model: class org.javalite.activejdbc.test_models.Animal
Registered model: class org.javalite.activejdbc.test_models.Cheese
Registered model: class org.javalite.activejdbc.test_models.Comment
Registered model: class org.javalite.activejdbc.test_models.Motherboard
Registered model: class org.javalite.activejdbc.test_models.User
Registered model: class org.javalite.activejdbc.test_models.Post
Registered model: class org.javalite.activejdbc.test_models.Apple
Registered model: class org.javalite.activejdbc.test_models.Keyboard
Registered model: class org.javalite.activejdbc.test_models.Student
Registered model: class org.javalite.activejdbc.test_models.Patient
Registered model: class org.javalite.activejdbc.test_models.University
Registered model: class org.javalite.activejdbc.test_models.SubClassification
Registered model: class org.javalite.activejdbc.test_models.Programmer
Registered model: class org.javalite.activejdbc.test_models.Recipe
Registered model: class org.javalite.activejdbc.test_models.Alarm
Registered model: class org.javalite.activejdbc.test_models.Assignment
Registered model: class org.javalite.activejdbc.test_models.Address
Registered model: class org.javalite.activejdbc.test_models.Room
Registered model: class org.javalite.activejdbc.test_models.NoArg
Registered model: class org.javalite.activejdbc.test_models.School
Registered model: class org.javalite.activejdbc.test_models.Salary
Registered model: class org.javalite.activejdbc.test_models.Computer
Registered model: class org.javalite.activejdbc.test_models.Account
Registered model: class org.javalite.activejdbc.test_models.Article
Registered model: class org.javalite.activejdbc.test_models.Item
Registered model: class org.javalite.activejdbc.test_models.Doctor
Registered model: class org.javalite.activejdbc.test_models.ContentGroup
Registered model: class org.javalite.activejdbc.test_models.Mammal
Registered model: class org.javalite.activejdbc.test_models.Ingredient
Registered model: class org.javalite.activejdbc.test_models.Cake
Registered model: class org.javalite.activejdbc.test_models.Temperature
Registered model: class org.javalite.activejdbc.test_models.Prescription
Registered model: class org.javalite.activejdbc.test_models.DoctorsPatients
Registered model: class org.javalite.activejdbc.test_models.Library
Registered model: class org.javalite.activejdbc.test_models.Fruit
Registered model: class org.javalite.activejdbc.test_models.Vegetable
Registered model: class org.javalite.activejdbc.test_models.Person
Registered model: class org.javalite.activejdbc.test_models.Watermelon
Registered model: class org.javalite.activejdbc.test_models.Tag
Registered model: class org.javalite.activejdbc.test_models.Page
Registered model: class org.javalite.activejdbc.test_models.Reader
Registered model: class org.javalite.activejdbc.test_models.Image
Registered model: class org.javalite.activejdbc.test_models.Vehicle
Registered model: class org.javalite.activejdbc.test_models.Classification
Registered model: class org.javalite.activejdbc.test_models.Book
Registered model: class org.javalite.activejdbc.test_models.Project
Registered model: class org.javalite.activejdbc.test_models.Node
Fetched metadata for table: accounts
Fetched metadata for table: addresses
Fetched metadata for table: alarms
Fetched metadata for table: animals
Fetched metadata for table: apples
Fetched metadata for table: articles
Fetched metadata for table: books
Fetched metadata for table: cakes
[main] WARN org.javalite.activejdbc.Registry - Failed to retrieve metadata for table: &#39;cheeses&#39;. Are you sure this table exists? For some databases table names are case sensitive.
Fetched metadata for table: classifications
Fetched metadata for table: comments
Fetched metadata for table: computers
Fetched metadata for table: content_groups
Fetched metadata for table: courses
Fetched metadata for table: developers
Fetched metadata for table: doctors
Fetched metadata for table: doctors_patients
Fetched metadata for table: fruits
Fetched metadata for table: images
Fetched metadata for table: ingredients
Fetched metadata for table: items
Fetched metadata for table: keyboards
Fetched metadata for table: legacy_universities
Fetched metadata for table: libraries
Fetched metadata for table: mammals
Fetched metadata for table: meals
Fetched metadata for table: Member
Fetched metadata for table: motherboards
[main] WARN org.javalite.activejdbc.Registry - Failed to retrieve metadata for table: &#39;no_args&#39;. Are you sure this table exists? For some databases table names are case sensitive.
Fetched metadata for table: nodes
Fetched metadata for table: pages
Fetched metadata for table: patients
Fetched metadata for table: people
Fetched metadata for table: plants
Fetched metadata for table: posts
Fetched metadata for table: prescriptions
Fetched metadata for table: programmers
Fetched metadata for table: programmers_projects
Fetched metadata for table: projects
Fetched metadata for table: readers
Fetched metadata for table: recipes
Fetched metadata for table: rooms
Fetched metadata for table: salaries
Fetched metadata for table: schools
Fetched metadata for table: students
Fetched metadata for table: sub_classifications
Fetched metadata for table: swords
Fetched metadata for table: tags
Fetched metadata for table: temperatures
Fetched metadata for table: users
Fetched metadata for table: vegetables
Fetched metadata for table: vehicles
Fetched metadata for table: watermelons
Association found: comments  &gt;----------  articles, type: belongs-to-polymorphic
Association found: articles  ----------&lt;  comments, type: has-many-polymorphic
Association found: comments  &gt;----------  posts, type: belongs-to-polymorphic
Association found: posts  ----------&lt;  comments, type: has-many-polymorphic
Association found: comments  &gt;----------  prescriptions, type: belongs-to-polymorphic
Association found: prescriptions  ----------&lt;  comments, type: has-many-polymorphic
Association found: students  &gt;---------&lt;  courses, type: many-to-many, join: registrations
Association found: courses  &gt;---------&lt;  students, type: many-to-many, join: registrations
Association found: recipes  &gt;---------&lt;  ingredients, type: many-to-many, join: ingredients_recipes
Association found: ingredients  &gt;---------&lt;  recipes, type: many-to-many, join: ingredients_recipes
Association found: keyboards  ----------&lt;  computers, type: has-many
Association found: computers  &gt;----------  keyboards, type: belongs-to
Association found: motherboards  ----------&lt;  computers, type: has-many
Association found: computers  &gt;----------  motherboards, type: belongs-to
Association found: tags  &gt;----------  articles, type: belongs-to-polymorphic
Association found: articles  ----------&lt;  tags, type: has-many-polymorphic
Association found: tags  &gt;----------  posts, type: belongs-to-polymorphic
Association found: posts  ----------&lt;  tags, type: has-many-polymorphic
Association found: classifications  &gt;----------  vehicles, type: belongs-to-polymorphic
Association found: vehicles  ----------&lt;  classifications, type: has-many-polymorphic
Association found: classifications  &gt;----------  mammals, type: belongs-to-polymorphic
Association found: mammals  ----------&lt;  classifications, type: has-many-polymorphic
Association found: libraries  ----------&lt;  books, type: has-many
Association found: books  &gt;----------  libraries, type: belongs-to
Association found: nodes  ----------&lt;  nodes, type: has-many
Association found: nodes  &gt;----------  nodes, type: belongs-to
Association found: rooms  &gt;----------  addresses, type: belongs-to
Association found: addresses  ----------&lt;  rooms, type: has-many
Association found: readers  &gt;----------  books, type: belongs-to
Association found: books  ----------&lt;  readers, type: has-many
Association found: sub_classifications  &gt;----------  classifications, type: belongs-to
Association found: classifications  ----------&lt;  sub_classifications, type: has-many
Association found: doctors_patients  &gt;----------  doctors, type: belongs-to
Association found: doctors  ----------&lt;  doctors_patients, type: has-many
Association found: doctors  &gt;---------&lt;  patients, type: many-to-many, join: doctors_patients
Association found: doctors_patients  &gt;----------  patients, type: belongs-to
Association found: patients  ----------&lt;  doctors_patients, type: has-many
Association found: prescriptions  &gt;----------  patients, type: belongs-to
Association found: patients  ----------&lt;  prescriptions, type: has-many
Association found: patients  &gt;---------&lt;  doctors, type: many-to-many, join: doctors_patients
Association found: programmers_projects  &gt;----------  programmers, type: belongs-to
Association found: programmers  ----------&lt;  programmers_projects, type: has-many
Association found: programmers  &gt;---------&lt;  projects, type: many-to-many, join: programmers_projects
Association found: programmers_projects  &gt;----------  projects, type: belongs-to
Association found: projects  ----------&lt;  programmers_projects, type: has-many
Association found: projects  &gt;---------&lt;  programmers, type: many-to-many, join: programmers_projects
Association found: addresses  &gt;----------  users, type: belongs-to
Association found: users  ----------&lt;  addresses, type: has-many
</code></pre>
<p>This output was taken from running <a href="https://github.com/javalite/activejdbc/blob/master/activejdbc/src/test/java/org/javalite/activejdbc/ModelTest.java">ModelTest.java</a>. There are three sections: registration, mapping, andAssociations.</p>
<p>The Entity Relationship diagram is represented by a <a href="https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model#Crow.27s_foot_notation">Crow's foot notation</a>.</p>
<h3 id="one-to-many-example">One to many example</h3>
<pre><code>Association found: libraries  ----------&lt;  books, type: has-many</code></pre>
<p>Means that a library has many books</p>
<h3 id="many-to-one-example">Many to one example</h3>
<pre><code>Association found: books  &gt;----------  libraries, type: belongs-to</code></pre>
<p>Books belong to library</p>
<h3 id="many-to-many-example">Many to many example</h3>
<pre><code>Association found: doctors  &gt;---------&lt;  patients, type: many-to-many, join: doctors_patients</code></pre>
<p>A doctor sees many patients and a patient visits many doctors.</p>
<h3 id="many-to-many-representation">Many-to-many representation</h3>
<p>Many to many relationship is in effect represented by other one-to-many relationships:</p>
<pre><code>Association found: doctors_patients  &gt;----------  doctors, type: belongs-to
Association found: doctors  ----------&lt;  doctors_patients, type: has-many
Association found: doctors  &gt;---------&lt;  patients, type: many-to-many, join: doctors_patients
Association found: doctors_patients  &gt;----------  patients, type: belongs-to
Association found: patients  ----------&lt;  doctors_patients, type: has-many</code></pre>
<h3 id="polimorphic-associations">Polimorphic Associations</h3>
<p>Polymorphic Association information is not sourced from the schem, but rather configured in code using annotations.</p>
<p>Please, see: <a href="polymorphic_associations">Polimorphic Associations</a>.</p>
