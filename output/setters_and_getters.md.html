<p>Working with getters and setters | <a href="/activejdbc">ActiveJDBC</a>,Setters and getters</p>
<h1 id="setters-and-getters">Setters and getters</h1>
<div id="toc"></div>

<p>Java development is all about getters and setters. Ever since the Java Beans framework introduced in 1997, this has become a blessing (and a plague some argue) in modern Java applications. ActiveJDBC does not require getters and setters for models. Since models already know all the allowable metadata from database at startup, they will perform validations of names of attributes.</p>
<h2 id="built-in-getters-and-setters">Built in getters and setters</h2>
<p>ActiveJDBC provides two base methods for getting information from DB and putting it in:</p>
<pre class="sourceCode java"><code class="sourceCode java">Person p = Person.<span class="fu">findById</span>();
name = p.<span class="fu">get</span>(<span class="st">&quot;name&quot;</span>);</code></pre>
<p>The <code>name</code> is a name of a column from a table PEOPLE. Same goes for a setter:</p>
<pre class="sourceCode java"><code class="sourceCode java">Person p = <span class="kw">new</span> <span class="fu">Person</span>();
p.<span class="fu">set</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;John&quot;</span>);
p.<span class="fu">save</span>();</code></pre>
<h2 id="wrapper-settersgetters">Wrapper setters/getters???</h2>
<p>ActiveJDBC will not provide these. However, you can have them if you like:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Person <span class="kw">extends</span> Model{
   <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setFirstName</span>(String firstName){
      <span class="fu">set</span>(<span class="st">&quot;first_name&quot;</span>, firstName);
   }
   <span class="kw">public</span> String <span class="fu">getFirstName</span>(){
      <span class="kw">return</span> <span class="fu">getString</span>(<span class="st">&quot;first_name&quot;</span>);
   }
}</code></pre>
<p>This will provide a safety net to those wishing some compiler static checking. With ActiveJDBC you can use dynamic getters and setters or write wrapper getter and setter methods. Please, see <a href="#recommendation-use-tdd-in-combination-with-some-setters-and-getters">Recommendation</a> below for mor information.</p>
<h2 id="type-conversion-getters">Type conversion getters</h2>
<p>ActiveJDBC provides a number of type conversion getters:</p>
<pre class="sourceCode java"><code class="sourceCode java">
Person p = Person.<span class="fu">findById</span>();
String  name = p.<span class="fu">getString</span>(<span class="st">&quot;name&quot;</span>);
Timestamp dob = p.<span class="fu">getTimestamp</span>(<span class="st">&quot;dob&quot;</span>);
...</code></pre>
<p>ActiveJDBC will do all possible to convert your data into the type. This also goes for CLOBs:</p>
<pre class="sourceCode java"><code class="sourceCode java">String body = article.<span class="fu">get</span>(<span class="st">&quot;body&quot;</span>);</code></pre>
<p>If the &quot;BODY&quot; column in your table is CLOB, ActiveJDBC will automatically convert it to Java String.</p>
<p>Please, see <a href="clob_support_and_caching">Clob support and caching</a> as well as <a href="http://javalite.github.io/activejdbc/org/javalite/common/Convert.html">JavaLite Commons Convert</a> class for more information.</p>
<h2 id="recommendation-use-tdd-in-combination-with-some-setters-and-getters">Recommendation: Use TDD, in combination with <em>some</em> setters and getters</h2>
<p>In our work, we start writing a test before writing much code. We create a one line model code, then start writing a test. Inside the test, we write a piece of code I know will fail:</p>
<pre class="sourceCode java"><code class="sourceCode java">Page p  = <span class="kw">new</span> <span class="fu">Page</span>();
p.<span class="fu">set</span>(<span class="st">&quot;blah&quot;</span>, <span class="dv">1</span>);</code></pre>
<p>The table PEOPLE does not have a column &quot;BLAH&quot;, and ActiveJDBC is conveniently telling me this:</p>
<pre class="prettyprint"><code>java.lang.IllegalArgumentException: Attribute: &#39;blah&#39; is not defined in model: &#39;class activejdbc.test_models.Person and also, did not find an association by the same name, 
available attributes: [id, updated_at, graduation_date, dob, name, last_name, created_at]</code></pre>
<p>From this message, I see that the allowed attributes are:</p>
<pre class="prettyprint"><code>id, updated_at, graduation_date, dob, name, last_name, created_at</code></pre>
<p>which gives me all the information I need to start writing a real test.</p>
<p>Since I know from <a href="autogenerated_fields">Autogenerated Fields</a> that <code>id</code>, <code>updated_at</code> and <code>created_at</code> are auto-generated columns and I need not touch them, I'm left with these to work:</p>
<pre class="prettyprint"><code>graduation_date, dob, name, last_name</code></pre>
<p>When we are done with the test, we have a piece of durable code which has captured required model behaviour. We then proceed to implement the rest of the model code - necessary validations, other code, until the test starts to pass.</p>
<blockquote>
<p><strong>General rule of thumb</strong> : only write setters and getters for attributes you are actually using in code.</p>
</blockquote>
<p>In our projects over the past 5 years using <a href="activejdbc">ActiveJDBC</a> and <a href="activeweb">ActiveWeb</a>, we progressed through three stages of understanding our coding patterns:</p>
<ul>
<li><strong>Stage 1:</strong> First we were excited and used dynamic setters and getters across the project, a la Ruby on Rails: <code>String  name = p.getString(&quot;name&quot;);</code>. Then we realized that like Ruby developers we were not getting any benefits from static typing of Java or from autocomplete from IDEs, no refactoring help, and moved to Stage 2:</li>
<li><strong>Stage 2:</strong> Write setter and getters fr every attribute. We immediately got refactoring, IDE support and static typing. However, nobody was happy writing them. There was even an attempt to autogenerate them, but due dynamic nature of ActiveJDBC (attributes based on columns in tables), this prove too much work, we progressed to stage 3:</li>
<li><strong>Stage 3:</strong> Write only getters and setters that are used in code verbatim. In most cases, when reading a submitted form from a web page, or reflecting attributes on a web page, ActiveWeb or a JSP can read these attributes dynamically, which means you do not need setters and getters. In rare cases we use them verbatim in code, and for those cases, the attributes are wrapped in setters and getters.</li>
</ul>
<p>For example, here is the <a href="https://github.com/javalite/activeweb-simple/blob/master/src/main/java/app/models/Book.java">Book</a> model. As you can see it has no setters and getters. Here is its use in controller: <a href="https://github.com/javalite/activeweb-simple/blob/master/src/main/java/app/controllers/BooksController.java">BookController</a> as well as view: <a href="https://github.com/javalite/activeweb-simple/blob/master/src/main/webapp/WEB-INF/views/books/index.ftl">books/index.ftl</a>.</p>
<p>As you can see, nowhere in code we had to access attribute directly, therefore we did not write setters and getters.</p>
